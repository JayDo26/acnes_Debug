import r from'./../external/@swc/helpers/src/_async_to_generator.mjs.js';import t from"../utils/query-string.js";import{APIS as e}from"../constants.js";import o from"../utils/lodash.js";import a from"../utils/request.js";import{__generator as n}from'./../external/tslib/tslib.es6.js';import s from"../appEnv/getEnv.js";var i,d=(i=r((function(r,a,s){var i,d,c,p;return n(this,(function(n){switch(n.label){case 0:return i={appId:r,versionStatus:a},o.isUndefined(s)||(i.currentVersion=s),d=t.appendToUrl(e.GET_APP_INFO,i),[4,fetch(d,{credentials:"include"})];case 1:return(c=n.sent()).ok?[4,c.json()]:[3,3];case 2:if((p=n.sent()).err<0||!p.data)throw new Error(p);return[2,{name:p.data.name,version:p.data.version,description:p.data.description,appUrl:p.data.appUrl,qrCodeUrl:p.data.qrCodeUrl,logoUrl:p.data.logoUrl,cateID:p.data.cateType}];case 3:throw new Error("Can't get app info")}}))})),function(r,t,e){return i.apply(this,arguments)});function c(r){try{var t=r.map((function(r){return{action:r.action,error:r.error,message:r.message,data:r.data}}));a.execute(e.SEND_ACTION_LOG,"post",{appId:window.APP_ID,data:JSON.stringify(t)},(function(){})),window.zmpSentry&&window.zmpSentry.captureMessage("Result from native",{extra:{data:r}})}catch(r){}}var p=function(r){return r.replace(/[A-Z]/g,(function(r){return"_".concat(r.toLowerCase())}))},u=function(){var r,t,e=Number((null===(r=s())||void 0===r?void 0:r.zaloVersion)||""),o=((null===(t=s())||void 0===t?void 0:t.platformName)||"").toLowerCase();return"android"===o?e%1e4:e};export{p as camelToSnakeCase,d as getAppInfo,u as getZaloVersionCode,c as sendLogData};
